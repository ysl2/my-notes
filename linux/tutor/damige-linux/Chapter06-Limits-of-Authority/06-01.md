# Linux 权限

## 权限符和用户组

权限符

| 字符 | 表示的含义 | 数字法中代表的权值数 |
| ---- | ---------- | -------------------- |
| `r`  | 读         | 4                    |
| `w`  | 写         | 2                    |
| `x`  | 执行       | 1                    |
| `-`  | 无权限     | 0                    |

属组和属主

| 字符 | 表示的含义 |
| ---- | ---------- |
| `u`  | 属主       |
| `g`  | 属组       |
| `o`  | 其他用户   |

`可执行`的意思是，除了能否执行以外，还有能不能打开，也就是能不能 cd 过去

特殊权限位：

|字符|简写|含义|
|---|---|---|
|`SUID`|`S`|命令也是文件，命令文件的读写权限是root管理员的，普通用户通过命令可间接更改文件|
|`SGID`|`S`|同上。但如果某文件是SGID权限，那么其子目录都会继承SGID|
|`SBIT`|`r-T`||

前两项的区别：一个是针对属主，一个是针对属组

## chown：改变文件属主和属组

```bash
# 设置haha的家目录的属主和属组
chown -R haha:haha /home/haha
```

## chmod：改变文件权限

普通法

```bash
chmod g=rx /home/haha/
```

加减法，加表示增加权限，减表示消除权限

```bash
chmod o+r /home/haha/
```

数字法

```bash
chmod 655 /home/haha/
```

文件默认最大权限：666
文件夹默认最大权限：777

## 权限扩展

### 文件默认权限

umask：权限值为022（第一个0先不管）
注意，umask不一定每次都是022，也可能是其他的，比如021

```bash
# umask可以自定义：
vim /etc/profile

# 找到umask字段，可以尝试把022改为021

# 然后使其生效
source /etc/profile
```

```bash
# 直接在命令行里敲
umask
```

文件夹：用当前最大权限减去umask，就是默认权限

```bash
文件夹：777 - 022 = 755（文件夹的默认权限）
```

文件：用当前最大权限减去umask后，有两种情况

1. 若减完之后，每一位都是偶数，则就是最终结果
2. 若减完之后，有奇数位，那么奇数位要+1

```bash
文件：666 - 022 = 644（文件夹的默认权限）

假如umask是021：
666 - 021 = 646（奇数位+1）
```

## 扩展阅读

ACL权限机制
